# NanoGridBot

> ğŸ¤– è½»é‡çº§ã€å®‰å…¨çš„ä¸ªäºº Claude AI åŠ©æ‰‹ - NanoClaw çš„ Python ç§»æ¤ç‰ˆ

[![Python Version](https://img.shields.io/badge/python-3.12+-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Code Style](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)

NanoGridBot æ˜¯ [NanoClaw](https://github.com/nanoclaw/nanoclaw) é¡¹ç›®çš„å®Œæ•´ Python ç§»æ¤ç‰ˆæœ¬ï¼Œæä¾›é€šè¿‡ WhatsApp è®¿é—®çš„ä¸ªäºº Claude AI åŠ©æ‰‹ï¼Œå…·æœ‰å®¹å™¨éš”ç¦»ã€å¤šç»„æ”¯æŒå’Œå¯æ‰©å±•æ¶æ„ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ”’ **å®¹å™¨éš”ç¦»**: ä½¿ç”¨ Docker å®ç° OS çº§åˆ«çš„å®‰å…¨éš”ç¦»
- ğŸ‘¥ **å¤šç»„éš”ç¦»**: æ¯ä¸ª WhatsApp ç¾¤ç»„æ‹¥æœ‰ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿå’Œä¼šè¯
- âš¡ **å¼‚æ­¥æ¶æ„**: åŸºäº asyncio çš„é«˜æ€§èƒ½è®¾è®¡
- ğŸ¯ **ç±»å‹å®‰å…¨**: ä½¿ç”¨ Pydantic è¿›è¡Œè¿è¡Œæ—¶æ•°æ®éªŒè¯
- ğŸ”Œ **å¯æ‰©å±•**: æ”¯æŒæ’ä»¶ç³»ç»Ÿã€å¤šé€šé“ã€Web ç›‘æ§
- ğŸ“Š **Web ç›‘æ§**: å®æ—¶æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€å’Œç®¡ç†ä»»åŠ¡
- ğŸ”„ **ä»»åŠ¡è°ƒåº¦**: æ”¯æŒ Cronã€é—´éš”å’Œä¸€æ¬¡æ€§ä»»åŠ¡
- ğŸŒ **å¤šé€šé“**: æ”¯æŒ WhatsAppã€Telegram ç­‰å¤šç§é€šä¿¡æ¸ é“

## ğŸ“‹ ç›®å½•

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
- [æ–‡æ¡£](#æ–‡æ¡£)
- [è´¡çŒ®](#è´¡çŒ®)
- [è®¸å¯è¯](#è®¸å¯è¯)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Python 3.12+
- Docker
- Node.js 20+ (ç”¨äº WhatsApp æ¡¥æ¥)
- Git

### å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/yourusername/nanogridbot.git
cd nanogridbot

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3.12 -m venv .venv
source .venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -e ".[dev]"

# æ„å»º Docker é•œåƒ
docker build -t nanogridbot-agent:latest container/

# å¯åŠ¨æœåŠ¡
python -m nanogridbot
```

### Docker Compose éƒ¨ç½²

```bash
docker-compose up -d
```

è¯¦ç»†å®‰è£…æŒ‡å—è¯·å‚è€ƒ [å¿«é€Ÿå¼€å§‹æ–‡æ¡£](docs/main/QUICK_START.md)ã€‚

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NanoGridBot ä¸»è¿›ç¨‹                        â”‚
â”‚  â€¢ æ¶ˆæ¯è½®è¯¢ (2s é—´éš”)                                        â”‚
â”‚  â€¢ WhatsApp é€šé“ (Baileys æ¡¥æ¥)                              â”‚
â”‚  â€¢ SQLite çŠ¶æ€æŒä¹…åŒ–                                         â”‚
â”‚  â€¢ GroupQueue (å¹¶å‘æ§åˆ¶)                                     â”‚
â”‚  â€¢ ä»»åŠ¡è°ƒåº¦å™¨ (Cron)                                         â”‚
â”‚  â€¢ IPC å¤„ç†å™¨ (æ–‡ä»¶ç³»ç»Ÿ)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ Docker å®¹å™¨å¯åŠ¨
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Agent å®¹å™¨ (Docker)                             â”‚
â”‚  â€¢ Claude Agent SDK æ‰§è¡Œ                                     â”‚
â”‚  â€¢ éš”ç¦»æ–‡ä»¶ç³»ç»Ÿ (æ˜¾å¼æŒ‚è½½)                                   â”‚
â”‚  â€¢ é root ç”¨æˆ· (node:1000)                                  â”‚
â”‚  â€¢ Chromium æµè§ˆå™¨è‡ªåŠ¨åŒ–                                     â”‚
â”‚  â€¢ IPC æ–‡ä»¶ç›‘å¬ (follow-up æ¶ˆæ¯)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ¨¡å—

| æ¨¡å— | èŒè´£ | æ–‡ä»¶ |
|------|------|------|
| **Orchestrator** | ä¸»ç¼–æ’å™¨ï¼Œç®¡ç†å…¨å±€çŠ¶æ€å’Œæ¶ˆæ¯å¾ªç¯ | `core/orchestrator.py` |
| **Container Runner** | å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†å’ŒæŒ‚è½½é…ç½® | `core/container_runner.py` |
| **Group Queue** | ç¾¤ç»„é˜Ÿåˆ—å’Œå¹¶å‘æ§åˆ¶ | `core/group_queue.py` |
| **Task Scheduler** | å®šæ—¶ä»»åŠ¡è°ƒåº¦ | `core/task_scheduler.py` |
| **IPC Handler** | è¿›ç¨‹é—´é€šä¿¡å¤„ç† | `core/ipc_handler.py` |
| **Database** | SQLite æ•°æ®æŒä¹…åŒ– | `database/db.py` |
| **Channels** | é€šé“æŠ½è±¡å±‚ | `channels/` |

è¯¦ç»†æ¶æ„è®¾è®¡è¯·å‚è€ƒ [æ¶æ„è®¾è®¡æ–‡æ¡£](docs/design/NANOGRIDBOT_DESIGN.md)ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

- âœ… **æ¶ˆæ¯å¤„ç†**: è‡ªåŠ¨å¤„ç† WhatsApp æ¶ˆæ¯ï¼Œæ”¯æŒè§¦å‘è¯è¿‡æ»¤
- âœ… **å®¹å™¨éš”ç¦»**: æ¯ä¸ªç¾¤ç»„åœ¨ç‹¬ç«‹å®¹å™¨ä¸­è¿è¡Œï¼Œç¡®ä¿å®‰å…¨éš”ç¦»
- âœ… **ä¼šè¯ç®¡ç†**: æ”¯æŒå¤šè½®å¯¹è¯å’Œä¼šè¯æ¢å¤
- âœ… **ä»»åŠ¡è°ƒåº¦**: æ”¯æŒ Cronã€é—´éš”å’Œä¸€æ¬¡æ€§ä»»åŠ¡
- âœ… **IPC é€šä¿¡**: å®¹å™¨ä¸ä¸»æœºé€šè¿‡æ–‡ä»¶ç³»ç»Ÿé€šä¿¡
- âœ… **æŒ‚è½½å®‰å…¨**: å¤–éƒ¨ç™½åå•éªŒè¯ï¼Œé˜²æ­¢è·¯å¾„éå†

### æ‰©å±•åŠŸèƒ½

- ğŸ”Œ **æ’ä»¶ç³»ç»Ÿ**: æ”¯æŒè‡ªå®šä¹‰æ’ä»¶æ‰©å±•åŠŸèƒ½
- ğŸ“Š **Web ç›‘æ§**: å®æ—¶æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€å’Œç®¡ç†ä»»åŠ¡
- ğŸŒ **å¤šé€šé“**: æ”¯æŒ WhatsAppã€Telegramã€Slack ç­‰
- ğŸ” **æ¶ˆæ¯æœç´¢**: å…¨æ–‡æœç´¢å†å²æ¶ˆæ¯
- ğŸ“ˆ **æŒ‡æ ‡å¯¼å‡º**: Prometheus æ ¼å¼çš„ç³»ç»ŸæŒ‡æ ‡
- ğŸš¦ **é€Ÿç‡é™åˆ¶**: é˜²æ­¢æ»¥ç”¨å’Œè¿‡è½½

### ä½¿ç”¨ç¤ºä¾‹

```
# å‘é€æ¶ˆæ¯
@Andy å¸®æˆ‘åˆ†æè¿™æ®µä»£ç çš„æ€§èƒ½é—®é¢˜

# åˆ›å»ºå®šæ—¶ä»»åŠ¡
@Andy schedule task
æç¤ºè¯: æ¯å¤©æ—©ä¸Š 8 ç‚¹å‘é€å¤©æ°”é¢„æŠ¥
è°ƒåº¦ç±»å‹: cron
Cron è¡¨è¾¾å¼: 0 8 * * *

# æŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨
@Andy list tasks

# æ³¨å†Œæ–°ç¾¤ç»„
@Andy register group
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
nanogridbot/
â”œâ”€â”€ src/nanogridbot/       # æºä»£ç 
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ database/          # æ•°æ®åº“
â”‚   â”œâ”€â”€ channels/          # é€šé“æŠ½è±¡
â”‚   â”œâ”€â”€ plugins/           # æ’ä»¶ç³»ç»Ÿ
â”‚   â””â”€â”€ web/               # Web ç›‘æ§
â”œâ”€â”€ container/             # Agent å®¹å™¨
â”œâ”€â”€ bridge/                # Baileys æ¡¥æ¥
â”œâ”€â”€ groups/                # ç¾¤ç»„å·¥ä½œç›®å½•
â”œâ”€â”€ data/                  # è¿è¡Œæ—¶æ•°æ®
â”œâ”€â”€ store/                 # æŒä¹…åŒ–å­˜å‚¨
â”œâ”€â”€ tests/                 # æµ‹è¯•
â””â”€â”€ docs/                  # æ–‡æ¡£
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=src --cov-report=html

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/unit/test_database.py -v
```

### ä»£ç è´¨é‡

```bash
# æ ¼å¼åŒ–ä»£ç 
black src/ tests/

# æ’åºå¯¼å…¥
isort src/ tests/

# è¿è¡Œ Linter
ruff check src/ tests/

# ç±»å‹æ£€æŸ¥
mypy src/
```

### æ’ä»¶å¼€å‘

åˆ›å»ºè‡ªå®šä¹‰æ’ä»¶ï¼š

```python
# plugins/my_plugin/plugin.py
from nanogridbot.plugins.base import Plugin

class MyPlugin(Plugin):
    @property
    def name(self) -> str:
        return "my_plugin"

    @property
    def version(self) -> str:
        return "1.0.0"

    async def initialize(self, config: dict):
        pass

    async def on_message_received(self, message):
        # å¤„ç†æ¶ˆæ¯
        return message
```

è¯¦ç»†å¼€å‘æŒ‡å—è¯·å‚è€ƒ [å¼€å‘æ–‡æ¡£](docs/main/QUICK_START.md#å¼€å‘æŒ‡å—)ã€‚

## ğŸš¢ éƒ¨ç½²æŒ‡å—

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker-compose build

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

### ç”Ÿäº§éƒ¨ç½²

1. **é…ç½®ç¯å¢ƒå˜é‡**
2. **è®¾ç½®æŒ‚è½½ç™½åå•**
3. **é…ç½®åå‘ä»£ç†** (Nginx)
4. **å¯ç”¨ HTTPS**
5. **é…ç½®ç›‘æ§å’Œå‘Šè­¦**

è¯¦ç»†éƒ¨ç½²æŒ‡å—è¯·å‚è€ƒ [å®æ–½æ–¹æ¡ˆ](docs/design/IMPLEMENTATION_PLAN.md)ã€‚

## ğŸ“š æ–‡æ¡£

### è®¾è®¡æ–‡æ¡£

- [æ¶æ„è®¾è®¡æ–‡æ¡£](docs/design/NANOGRIDBOT_DESIGN.md) - è¯¦ç»†çš„æ¨¡å—è®¾è®¡å’Œä»£ç ç¤ºä¾‹
- [å®æ–½æ–¹æ¡ˆ](docs/design/IMPLEMENTATION_PLAN.md) - å¼€å‘é˜¶æ®µå’Œä»»åŠ¡åˆ†è§£
- [åˆ†ææ€»ç»“](docs/main/ANALYSIS_SUMMARY.md) - NanoClaw é¡¹ç›®åˆ†ææ€»ç»“

### ç”¨æˆ·æ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹](docs/main/QUICK_START.md) - å®‰è£…å’Œä½¿ç”¨æŒ‡å—
- [é…ç½®è¯´æ˜](docs/main/QUICK_START.md#é…ç½®è¯´æ˜) - ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶
- [æ•…éšœæ’é™¤](docs/main/QUICK_START.md#æ•…éšœæ’é™¤) - å¸¸è§é—®é¢˜è§£å†³

### API æ–‡æ¡£

- Web API æ–‡æ¡£: `http://localhost:8000/docs` (å¯åŠ¨æœåŠ¡åè®¿é—®)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯: `git checkout -b feature/my-feature`
3. æäº¤æ›´æ”¹: `git commit -am 'Add my feature'`
4. æ¨é€åˆ†æ”¯: `git push origin feature/my-feature`
5. åˆ›å»º Pull Request

### è´¡çŒ®æŒ‡å—

- éµå¾ª PEP 8 ä»£ç è§„èŒƒ
- ä½¿ç”¨ Black æ ¼å¼åŒ–ä»£ç 
- æ·»åŠ ç±»å‹æ³¨è§£
- ç¼–å†™å•å…ƒæµ‹è¯•
- æ›´æ–°æ–‡æ¡£

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | å®é™… |
|------|------|------|
| æ¶ˆæ¯å¤„ç†å»¶è¿Ÿ | < 2 ç§’ | TBD |
| å®¹å™¨å¯åŠ¨æ—¶é—´ | < 5 ç§’ | TBD |
| å¹¶å‘å®¹å™¨æ•° | 5-10 ä¸ª | TBD |
| å†…å­˜å ç”¨ | < 500MB | TBD |
| æµ‹è¯•è¦†ç›–ç‡ | > 80% | TBD |

## ğŸ”’ å®‰å…¨

### å®‰å…¨ç‰¹æ€§

- å®¹å™¨éš”ç¦»ï¼ˆé root ç”¨æˆ·ï¼‰
- æŒ‚è½½ç™½åå•éªŒè¯
- è·¯å¾„éå†é˜²æŠ¤
- æ•æ„Ÿç›®å½•é»‘åå•
- API è®¤è¯æˆæƒ
- é€Ÿç‡é™åˆ¶

### æŠ¥å‘Šå®‰å…¨é—®é¢˜

å¦‚æœå‘ç°å®‰å…¨æ¼æ´ï¼Œè¯·å‘é€é‚®ä»¶è‡³ security@example.comï¼Œä¸è¦å…¬å¼€æŠ«éœ²ã€‚

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- [NanoClaw](https://github.com/nanoclaw/nanoclaw) - åŸå§‹ TypeScript å®ç°
- [Baileys](https://github.com/WhiskeySockets/Baileys) - WhatsApp Web API
- [FastAPI](https://fastapi.tiangolo.com/) - Web æ¡†æ¶
- [Pydantic](https://docs.pydantic.dev/) - æ•°æ®éªŒè¯

## ğŸ“ è”ç³»æ–¹å¼

- GitHub: https://github.com/yourusername/nanogridbot
- Issues: https://github.com/yourusername/nanogridbot/issues
- Discussions: https://github.com/yourusername/nanogridbot/discussions

---

**å¼€å‘çŠ¶æ€**: ğŸš§ å¼€å‘ä¸­

**å½“å‰ç‰ˆæœ¬**: v0.1.0-alpha

**æœ€åæ›´æ–°**: 2026-02-13
